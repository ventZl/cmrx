<!-- HTML header for doxygen 1.9.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>C Microkernel Realtime eXecutive: Standard API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="all">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">C Microkernel Realtime eXecutive
   </div>
   <div id="projectbrief">Realtime Operating System for Cortex-M based microcontrollers</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__api__standard.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Standard API<div class="ingroups"><a class="el" href="group__api.html">Kernel API</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>API providing standardized access to various aspects required by userland.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>API providing standardized access to various aspects required by userland. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga821cccfa3f3ac511dd361a3544715944" name="ga821cccfa3f3ac511dd361a3544715944"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga821cccfa3f3ac511dd361a3544715944">&#9670;&#160;</a></span>diff_microtime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t diff_microtime </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>older_timestamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>newer_timestamp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate a distance of two timestamps Small helper function to calculate the time between two timestamps. </p>
<p>It will calculate the distance of two timestamps taking possible time counter wraparound. It assumes the order of timestamps is older first, newer last. </p><dl class="section note"><dt>Note</dt><dd>This function only returns correct results for timestamps that are less than ~4000 seconds apart. For timestamps more than ~4000 seconds apart two (or even more) timestamp wraparounds happen and the distance calculation returns invalid values. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">older_timestamp</td><td>timestamp of event that happened first </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">newer_timestamp</td><td>timestamp of event that happened last </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>distance of timestamps in microseconds </dd></dl>

</div>
</div>
<a id="ga3237021168ac3f0aa996c3c97b51e323" name="ga3237021168ac3f0aa996c3c97b51e323"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3237021168ac3f0aa996c3c97b51e323">&#9670;&#160;</a></span>get_cpu_freq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__os__syscall.html#ga6c52288e9645b2cd2c4ada0577669340">__SYSCALL</a> long get_cpu_freq </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtain the current CPU frequency. </p>
<p>Give userspace applications access to the current CPU frequency.</p>
<dl class="section return"><dt>Returns</dt><dd>CPU frequency in Hz or 0 if frequency is unknown or unreliable. </dd></dl>

</div>
</div>
<a id="gab9090f01493a7759cdd3dd5bf4d917d2" name="gab9090f01493a7759cdd3dd5bf4d917d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab9090f01493a7759cdd3dd5bf4d917d2">&#9670;&#160;</a></span>getmicrotime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__os__syscall.html#ga6c52288e9645b2cd2c4ada0577669340">__SYSCALL</a> uint32_t getmicrotime </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtain the current scheduler time. </p>
<p>Returns current scheduler time. The time is returned with nanosecond resolution and precision depending on the timing provider implemented.</p>
<p>This value wraps around after about 4000 seconds on 32-bit CPUs</p>
<dl class="section return"><dt>Returns</dt><dd>current scheduler time in nanoseconds </dd></dl>

</div>
</div>
<a id="gae1715e8318d2fce3df9a39f863d9493f" name="gae1715e8318d2fce3df9a39f863d9493f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae1715e8318d2fce3df9a39f863d9493f">&#9670;&#160;</a></span>shutdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__os__syscall.html#ga6c52288e9645b2cd2c4ada0577669340">__SYSCALL</a> uint32_t shutdown </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shutdown CMRX kernel. </p>
<p>This syscall will initiate CMRX kernel shutdown. Kernel shutdown ensures that the timing provider is stopped. Interrupts are also disabled globally. No check on existing threads status is made. It is up to the application developer to ensure that threads are in stable state before kernel is shut down. Any work done and not saved in threads still active will be lost.</p>
<p>It is not possible to call CMRX system calls once kernel has been shut down. While in general, the possibility of restarting kernel after it has been shut down is not ruled out this workflow is considered as unsupported.</p>
<p>After kernel is shut down the execution will continue in function named <a class="el" href="group__arch__arm__sched.html#gaa1fe4414a243f61c85e0a1d2fbd01440" title="Default CMRX shutdown handler for ARM CPUs This is default action after for when the CMRX kernel is s...">cmrx_shutdown_handler()</a>. If this function is not defined, then the CPU will be reset.</p>
<p>CPU state when <a class="el" href="group__arch__arm__sched.html#gaa1fe4414a243f61c85e0a1d2fbd01440" title="Default CMRX shutdown handler for ARM CPUs This is default action after for when the CMRX kernel is s...">cmrx_shutdown_handler()</a> is called:</p><ul>
<li>memory protection disabled</li>
<li>privileged mode execution</li>
<li>all interrupts disabled </li>
</ul>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.7-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</div>
</body>
</html>
