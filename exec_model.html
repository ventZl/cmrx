<!-- HTML header for doxygen 1.9.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>C Microkernel Realtime eXecutive: Execution Model</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="all">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">C Microkernel Realtime eXecutive
   </div>
   <div id="projectbrief">Realtime Operating System for Cortex-M based microcontrollers</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('exec_model.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Execution Model</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>As long as memory is concerned, the entity governing access is a process. As long as scheduling is concern, the governing entity is a thread. CMRX contains prioritized, multi-threaded, preemptive scheduler. As of now, this scheduler is not SMP-capable.</p>
<h2><a class="anchor" id="autotoc_md25"></a>
Scheduler</h2>
<p>Scheduler of CMRX RTOS offers 256 different priorities of threads, with priority 0 being the highest and priority 255 being the lowest, reserved for the idle task use. Scheduler is prioritized, so whenever a thread has to be selected for execution, the thread with the highest priority (the lowest numerical value of priority) is selected that is ready to execute.</p>
<p>Priorities are assigned per-thread, not per-process. So it is possible for one process to have multiple threads having different priorities. Threads with higher priorities might be used to handle external events, while threads with lower priorities might be used to crunch asynchronous work.</p>
<p>Scheduler is preemptive, which means that whenever there are two threads ready to execute having same priority, they will share the CPU time. Scheduler will periodically switch from one thread to another so that both threads can run "simultaneously". This is something to consider when designing event handler thread priorities. If two event handler threads have the same priority, then it may happen that arrival of event handled by some of these threads, while other thread is already running may preempt one thread by another. This may introduce non-determinism or unacceptably long latencies.</p>
<p>There is no per-process prioritization. Whenever a thread has to be selected, all threads from all processes are considered. Process switch occurs automatically if the next thread to be executed belongs to different process than the thread being swapped out. There is no fairness in CPU time allocated to threads or processes. CPU time is always allocated to thread(s) with highest priority that are runnable. If there is more than one such thread, then CPU time is divided between these processes evenly.</p>
<h2><a class="anchor" id="autotoc_md27"></a>
Interrupts</h2>
<p>All the code running in the userspace, even the code of threads with priority 0 has lower priority than any interrupt that may happen. This way any code registered as an interrupt handler will preempt any thread running. Device interrupt handlers have priority higher than the kernel service handler. The effect of such setup is, that hardware interrupts will preempt even running kernel system call. This has the consequence, that it is not possible to call system calls from within interrupt service routines. There is special set of <a class="el" href="group__api__isr.html">Interrupt Service Routines</a> minimalistic API which allows to run limited subset of kernel services from within interrupt service handler. The goal of this design is to make ISRs as lean as possible to they won't disturb thread execution much.</p>
<p>Only perform time-sensitive work in the context of an ISR and defer all remaining work to designated thread. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.7-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</div>
</body>
</html>
