<!-- HTML header for doxygen 1.9.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>C Microkernel Realtime eXecutive: System calls</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="all">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">C Microkernel Realtime eXecutive
   </div>
   <div id="projectbrief">Realtime Operating System for Cortex-M based microcontrollers</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__os__syscall.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">System calls<div class="ingroups"><a class="el" href="group__os.html">Kernel documentation</a></div></div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>Kernel contains mechanism of using kernel services. </p>
<p>Portable parts of system call machinery.</p>
<p>This mechanism (commonly known as system calls, or syscalls) can be used to call system services only from userspace code running in thread context. It is not possible to call these services from within ISR context. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gae074ff178f562a3742a23bdd56e08122" name="gae074ff178f562a3742a23bdd56e08122"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae074ff178f562a3742a23bdd56e08122">&#9670;&#160;</a></span>___SVC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ___SVC</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">no</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <span class="keyword">asm</span> <span class="keyword">volatile</span>(\</div>
<div class="line">            <span class="stringliteral">&quot;SVC %[immediate]\n\t&quot;</span>\</div>
<div class="line">            <span class="stringliteral">&quot;BX LR\n\t&quot;</span> : : [immediate] <span class="stringliteral">&quot;I&quot;</span> (no))</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga7b1388f7bd14b83bd3f8f773fbf3375b" name="ga7b1388f7bd14b83bd3f8f773fbf3375b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7b1388f7bd14b83bd3f8f773fbf3375b">&#9670;&#160;</a></span>__SVC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define __SVC</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">no</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="group__os__syscall.html#gae074ff178f562a3742a23bdd56e08122">___SVC</a>(no)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform syscall. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">no</td><td>number of syscall. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga6c52288e9645b2cd2c4ada0577669340" name="ga6c52288e9645b2cd2c4ada0577669340"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6c52288e9645b2cd2c4ada0577669340">&#9670;&#160;</a></span>__SYSCALL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define __SYSCALL&#160;&#160;&#160;__attribute__((naked)) __attribute__((noinline))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mark function as syscall entrypoint in userspace. </p>
<p>This gives the function some common attributes. Currently syscall entrypoint are short functions which never get inlined and don't construct stack frame. This is the most efficient method of calling syscalls right now. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gada41dc2b7ccf9df17f433b5d5893cfcf" name="gada41dc2b7ccf9df17f433b5d5893cfcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gada41dc2b7ccf9df17f433b5d5893cfcf">&#9670;&#160;</a></span>Syscall_Handler_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* Syscall_Handler_t) (int, int, int, int)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga31e8f196f246216d32eec552c2640f8c" name="ga31e8f196f246216d32eec552c2640f8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga31e8f196f246216d32eec552c2640f8c">&#9670;&#160;</a></span>eSysCalls</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__os__syscall.html#ga31e8f196f246216d32eec552c2640f8c">eSysCalls</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>List of known syscall IDs. </p>
<p>These syscall IDs are known and can be used to call services. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga31e8f196f246216d32eec552c2640f8cafcd682b1eda938618ae36dc8e128ecab" name="gga31e8f196f246216d32eec552c2640f8cafcd682b1eda938618ae36dc8e128ecab"></a>SYSCALL_GET_TID&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga31e8f196f246216d32eec552c2640f8ca0f4a1b65b37b05187900f2c1343a93a2" name="gga31e8f196f246216d32eec552c2640f8ca0f4a1b65b37b05187900f2c1343a93a2"></a>SYSCALL_SCHED_YIELD&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga31e8f196f246216d32eec552c2640f8cad625df5634d7a773618f3067e953e28b" name="gga31e8f196f246216d32eec552c2640f8cad625df5634d7a773618f3067e953e28b"></a>SYSCALL_THREAD_CREATE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga31e8f196f246216d32eec552c2640f8cafb8482b03e9287997b40a18e356713dd" name="gga31e8f196f246216d32eec552c2640f8cafb8482b03e9287997b40a18e356713dd"></a>SYSCALL_MUTEX_INIT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga31e8f196f246216d32eec552c2640f8cabd802d411abb98cbd1c9cd2d9a98fbf2" name="gga31e8f196f246216d32eec552c2640f8cabd802d411abb98cbd1c9cd2d9a98fbf2"></a>SYSCALL_MUTEX_DESTROY&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga31e8f196f246216d32eec552c2640f8cad8615286f2f44b2228e53ab6d1650e09" name="gga31e8f196f246216d32eec552c2640f8cad8615286f2f44b2228e53ab6d1650e09"></a>SYSCALL_MUTEX_UNLOCK&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga31e8f196f246216d32eec552c2640f8ca261f81b9032da9d945e088274cec20e8" name="gga31e8f196f246216d32eec552c2640f8ca261f81b9032da9d945e088274cec20e8"></a>SYSCALL_MUTEX_TRYLOCK&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga31e8f196f246216d32eec552c2640f8caa80161e2f5d98a5d67a835f3f2e413c6" name="gga31e8f196f246216d32eec552c2640f8caa80161e2f5d98a5d67a835f3f2e413c6"></a>SYSCALL_RPC_CALL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga31e8f196f246216d32eec552c2640f8ca37221749c556b44a4fe1da86b1c7af19" name="gga31e8f196f246216d32eec552c2640f8ca37221749c556b44a4fe1da86b1c7af19"></a>SYSCALL_RPC_RETURN&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga31e8f196f246216d32eec552c2640f8cafc4cb0aed15a099a86bd453440470e56" name="gga31e8f196f246216d32eec552c2640f8cafc4cb0aed15a099a86bd453440470e56"></a>SYSCALL_THREAD_JOIN&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga31e8f196f246216d32eec552c2640f8caadae95e6f725acffb58800c4a94a9d4b" name="gga31e8f196f246216d32eec552c2640f8caadae95e6f725acffb58800c4a94a9d4b"></a>SYSCALL_THREAD_EXIT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga31e8f196f246216d32eec552c2640f8ca77ff0c605bc2c6664d364e2f7c81ec26" name="gga31e8f196f246216d32eec552c2640f8ca77ff0c605bc2c6664d364e2f7c81ec26"></a>SYSCALL_SETITIMER&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga31e8f196f246216d32eec552c2640f8ca7c6fd18f70a38135bdd266ff08df3f4c" name="gga31e8f196f246216d32eec552c2640f8ca7c6fd18f70a38135bdd266ff08df3f4c"></a>SYSCALL_USLEEP&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga31e8f196f246216d32eec552c2640f8caf3209a69e73de6cd0c35d37c57ae4f5e" name="gga31e8f196f246216d32eec552c2640f8caf3209a69e73de6cd0c35d37c57ae4f5e"></a>SYSCALL_SIGNAL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga31e8f196f246216d32eec552c2640f8ca805395ea3d38618848abef5215530210" name="gga31e8f196f246216d32eec552c2640f8ca805395ea3d38618848abef5215530210"></a>SYSCALL_KILL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga31e8f196f246216d32eec552c2640f8cae036d9dace8a809308690d330733ff5c" name="gga31e8f196f246216d32eec552c2640f8cae036d9dace8a809308690d330733ff5c"></a>SYSCALL_SETPRIORITY&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga31e8f196f246216d32eec552c2640f8ca048d1ca2a60d40eaadc64de9af798702" name="gga31e8f196f246216d32eec552c2640f8ca048d1ca2a60d40eaadc64de9af798702"></a>SYSCALL_RESET&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga31e8f196f246216d32eec552c2640f8ca4ca0c68f905e31ed3c06d15fde068f7e" name="gga31e8f196f246216d32eec552c2640f8ca4ca0c68f905e31ed3c06d15fde068f7e"></a>_SYSCALL_COUNT&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga16718b58a2540d2e22ca17fe8ce11aab" name="ga16718b58a2540d2e22ca17fe8ce11aab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga16718b58a2540d2e22ca17fe8ce11aab">&#9670;&#160;</a></span>os_system_call()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int os_system_call </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>arg0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>arg1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>arg2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>arg3</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>syscall_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find and execute a system call. </p>
<p>Execution of system call is a portable action. It translates into calling a function determined by checking the syscall table. This function will call the syscall and return the return value it provided. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arg0</td><td>1st argument to the syscall routine </td></tr>
    <tr><td class="paramname">arg1</td><td>2nd argument to the syscall routine </td></tr>
    <tr><td class="paramname">arg2</td><td>3rd argument to the syscall routine </td></tr>
    <tr><td class="paramname">arg3</td><td>4th argument to the syscall routine </td></tr>
    <tr><td class="paramname">syscall_id</td><td>the ID of system call routine that has to be called </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>value provided by the system call routine, if routine with given syscall_id exists. Otherwise returns E_NOTAVAIL. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.7-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</div>
</body>
</html>
