<!-- HTML header for doxygen 1.9.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>C Microkernel Realtime eXecutive: Build system</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="all">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">C Microkernel Realtime eXecutive
   </div>
   <div id="projectbrief">Realtime Operating System for Cortex-M based microcontrollers</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('build_system.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Build system</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>CMRX is using CMake to build the kernel and applications. It works the best with vendor SDKs that also provide CMake-based build systems but can be integrated with SDKs that are based on Makefiles albeit this makes everything more complicated.</p>
<h1><a class="anchor" id="autotoc_md0"></a>
CMake support for CMRX</h1>
<p>CMRX support is currently provided as three more-less separate parts:</p>
<ol type="1">
<li><a class="el" href="findcmsis.html">FindCMSIS CMake module</a> which performs the detection and configuration of the CMSIS headers in vedor SDK.</li>
<li><a class="el" href="cmrx-cmake.html">CMRX CMake module</a> that performe kernel configuration and provides some CMRX-specific commands.</li>
<li>Inclusion of CMRX source tree to actually build the CMRX kernel.</li>
</ol>
<h1><a class="anchor" id="autotoc_md1"></a>
Build-time options</h1>
<p>CMRX kernel can be configured during the compile time. To do so, define any of the following variables before including CMRX.cmake module:</p>
<h2><a class="anchor" id="autotoc_md2"></a>
CMRX_UNIT_TESTS</h2>
<p>Default: ON (Windows: OFF)</p>
<p>If enabled, CMRX kernel will automatically build unit test suite for the kernel. This requires the presence of GCC toolchain for the host machine.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
CMRX_KERNEL_TRACING</h2>
<p>Default: OFF</p>
<p>If enabled, kernel tracing infrastructure is enabled. This will build callouts to tracing functions inside kernel. Tracing allows to trace certain events inside kernel into circular buffer that can be dumped via debugger and further analyzed.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
CMRX_CLANG_TIDY</h2>
<p>Default: ON</p>
<p>If enabled, clang-tidy target is added into build system. This target runs clang-tidy on kernel sources. Running this target requires clang-tidy to be installed on host machine. Build won't fail if this option is enabled and clang-tidy is not installed as this target is not run automatically.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
CMRX_KERNEL_TRANSACTION_VERIFICATION</h2>
<p>Default: OFF</p>
<p>This enables additional runtime checks of kernel transaction subsystem. If rules of transaction handling are violated then kernel will assert. This option is for kernel debugging purposes only as it will slow kernel down significantly.</p>
<h2><a class="anchor" id="autotoc_md6"></a>
CMRX_IDLE_THREAD_SHUTDOWN_CPU</h2>
<p>Default: OFF</p>
<p>If enabled, then idle core will be halted using platform-specific way to stop the CPU. Doing so can help to save energy as core that is halted consumes almost no power. In rare cases this may cause the clock used to power the timing provider to stop too. In such cases this option has to be set to OFF or different clock source has to be used to power the timing provider.</p>
<h2><a class="anchor" id="autotoc_md7"></a>
CMRX_RPC_CANARY</h2>
<p>Default: OFF</p>
<p>This enabled putting a canary value on stack during RPC processing. This allows early detection of stack corruption during RPC processing. Canaries are fixed values put onto stack when calling RPC method and checked for presence when RPC method is returning. Adding them slows execution of RPC calls a bit.</p>
<h2><a class="anchor" id="autotoc_md8"></a>
CMRX_MAP_FILE_WITH_EXTENSION</h2>
<p>Default: OFF</p>
<p>If enabled, the MAP file name will contain both binary extension and ".map" suffix (forming firmware_name.elf.map). Otherwise the MAP file name only contains ".map" extension (forming firmware.map). This can be set to <code>ON</code> if vendor SDK forces the MAP file name to be ".elf.map" so all other tools will work with the correct file.</p>
<h2><a class="anchor" id="autotoc_md9"></a>
OS_STACK_SIZE</h2>
<p>Default: 1024</p>
<p>Size of thread stack in bytes.</p>
<h2><a class="anchor" id="autotoc_md10"></a>
OS_THREADS</h2>
<p>Default: 8</p>
<p>Maximum amount of threads existing in system at any given time. No more threads can be created until some of threads quits.</p>
<h2><a class="anchor" id="autotoc_md11"></a>
OS_PROCESSES</h2>
<p>Default: 8</p>
<p>Maximum amount of processes existing in system at any given time. If more processes are added during CMake configuration run, then resulting firmware will fail to start.</p>
<h2><a class="anchor" id="autotoc_md12"></a>
OS_STACKS</h2>
<p>Default: 8</p>
<p>Maximum amount of stacks allocated in the system. Currently, it should never be smaller than OS_THREADS as this may result in threads not having stack to run.</p>
<h2><a class="anchor" id="autotoc_md13"></a>
CMRX_ARCH_SMP_SUPPORTED</h2>
<p>Default: OFF</p>
<p>If enabled, the multi-core support is enabled for target platform. This enables per-core kernel startup and per-core thread allocation. <b>Experimental</b></p>
<h2><a class="anchor" id="autotoc_md14"></a>
CMRX_OS_NUM_CORES</h2>
<p>Default: 1</p>
<p>Used to specify how many physical cores are there in package in case multi-core support has been enabled. This configures various in-kernel structures to have space for all required data. Note that it is possible to pass number lower than the actual core count if CMRX should not take care of all the cores in the system. For example, if the system contains four cores, this option may be configured to contain value 3. Then CMRX will manage only three cores, while the fourth core can be managed completely independently to CMRX kernel as long as it won't interfere with it. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.7-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</div>
</body>
</html>
