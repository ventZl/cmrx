<!-- HTML header for doxygen 1.9.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>C Microkernel Realtime eXecutive: Arch_State_t Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="all">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">C Microkernel Realtime eXecutive
   </div>
   <div id="projectbrief">Realtime Operating System for Cortex-M based microcontrollers</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('structArch__State__t.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle"><div class="title">Arch_State_t Struct Reference<div class="ingroups"><a class="el" href="group__os.html">Kernel documentation</a> &raquo; <a class="el" href="group__arch.html">Architecture support</a> &raquo; <a class="el" href="group__arch__arch.html">Abstract machine</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>ARM-specific architecture state of a thread.  
 <a href="structArch__State__t.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:ad935c55237c6bbd29aaeace9615fafda" id="r_ad935c55237c6bbd29aaeace9615fafda"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structArch__State__t.html#ad935c55237c6bbd29aaeace9615fafda">block_pipe</a> [2]</td></tr>
<tr class="memdesc:ad935c55237c6bbd29aaeace9615fafda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pipe used to force thread to stop.  <br /></td></tr>
<tr class="separator:ad935c55237c6bbd29aaeace9615fafda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acae038fb3118503f8892f30f98662804" id="r_acae038fb3118503f8892f30f98662804"><td class="memItemLeft" align="right" valign="top">volatile atomic_int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structArch__State__t.html#acae038fb3118503f8892f30f98662804">is_suspended</a></td></tr>
<tr class="memdesc:acae038fb3118503f8892f30f98662804"><td class="mdescLeft">&#160;</td><td class="mdescRight">State information on if thread is suspended or not (unused)  <br /></td></tr>
<tr class="separator:acae038fb3118503f8892f30f98662804"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8b71a1cc792a6c50c15fc5f9b0857e3" id="r_ab8b71a1cc792a6c50c15fc5f9b0857e3"><td class="memItemLeft" align="right" valign="top">thrd_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structArch__State__t.html#ab8b71a1cc792a6c50c15fc5f9b0857e3">sched_thread</a></td></tr>
<tr class="memdesc:ab8b71a1cc792a6c50c15fc5f9b0857e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">C11 thread identifier of the Linux thread that supports this CMRX thread.  <br /></td></tr>
<tr class="separator:ab8b71a1cc792a6c50c15fc5f9b0857e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bf7d26220c2bde068cf67f469a3082e" id="r_a2bf7d26220c2bde068cf67f469a3082e"><td class="memItemLeft" align="right" valign="top">pthread_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structArch__State__t.html#a2bf7d26220c2bde068cf67f469a3082e">sched_thread_id</a></td></tr>
<tr class="memdesc:a2bf7d26220c2bde068cf67f469a3082e"><td class="mdescLeft">&#160;</td><td class="mdescRight">POSIX thread identifier of the Linux thread that support this CMRX thread.  <br /></td></tr>
<tr class="separator:a2bf7d26220c2bde068cf67f469a3082e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18857e0041e85531b72310430a7c3e4f" id="r_a18857e0041e85531b72310430a7c3e4f"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structsyscall__dispatch__t.html">syscall_dispatch_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structArch__State__t.html#a18857e0041e85531b72310430a7c3e4f">syscall</a></td></tr>
<tr class="memdesc:a18857e0041e85531b72310430a7c3e4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Buffer for dispatching system calls to the kernel and return values back to the userspace.  <br /></td></tr>
<tr class="separator:a18857e0041e85531b72310430a7c3e4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>ARM-specific architecture state of a thread. </p>
<p>Architecture code-private part of thread record.</p>
<p>Linux port internal architecture state.</p>
<p>This structure holds additional state needed by the ARM Cortex M CPUs to properly store/restore thread state.</p>
<p>As of now the floating point usage information is stored here. This is provided only if FPU is available and activated.</p>
<p>This structure records thread state private to the Linux port. Here blocking primitives for synchronization of threads and system calls are recorded as well as block where information is passed down to the syscall and back from it.</p>
<p>This structure holds the CPU-specific part of thread state. It can be empty if architecture does not need any specific information saved in the CPU state. </p>
</div><h2 class="groupheader">Field Documentation</h2>
<a id="ad935c55237c6bbd29aaeace9615fafda" name="ad935c55237c6bbd29aaeace9615fafda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad935c55237c6bbd29aaeace9615fafda">&#9670;&#160;</a></span>block_pipe</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Arch_State_t::block_pipe[2]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pipe used to force thread to stop. </p>
<p>Underlying mechanism is using POSIX threads to host CMRX threads. These can't be stopped from outside, so we use this mechanism to inject synchronization points into threads.</p>
<p>Use thread_suspend_execution() in whatever place you need to suspend thread execution for whatever reason other hardware would do so - e.g. switch into kernel context or interrupt.</p>
<p>@Note Offset [1] is the write (unblock) end, offset [0] is the read (block) end. </p>

</div>
</div>
<a id="acae038fb3118503f8892f30f98662804" name="acae038fb3118503f8892f30f98662804"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acae038fb3118503f8892f30f98662804">&#9670;&#160;</a></span>is_suspended</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile atomic_int Arch_State_t::is_suspended</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>State information on if thread is suspended or not (unused) </p>

</div>
</div>
<a id="ab8b71a1cc792a6c50c15fc5f9b0857e3" name="ab8b71a1cc792a6c50c15fc5f9b0857e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8b71a1cc792a6c50c15fc5f9b0857e3">&#9670;&#160;</a></span>sched_thread</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">thrd_t Arch_State_t::sched_thread</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>C11 thread identifier of the Linux thread that supports this CMRX thread. </p>

</div>
</div>
<a id="a2bf7d26220c2bde068cf67f469a3082e" name="a2bf7d26220c2bde068cf67f469a3082e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bf7d26220c2bde068cf67f469a3082e">&#9670;&#160;</a></span>sched_thread_id</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_t Arch_State_t::sched_thread_id</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>POSIX thread identifier of the Linux thread that support this CMRX thread. </p>

</div>
</div>
<a id="a18857e0041e85531b72310430a7c3e4f" name="a18857e0041e85531b72310430a7c3e4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18857e0041e85531b72310430a7c3e4f">&#9670;&#160;</a></span>syscall</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structsyscall__dispatch__t.html">syscall_dispatch_t</a> Arch_State_t::syscall</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Buffer for dispatching system calls to the kernel and return values back to the userspace. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.7-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="structArch__State__t.html">Arch_State_t</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</div>
</body>
</html>
